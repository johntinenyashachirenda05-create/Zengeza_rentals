{% extends 'rentals/base.html' %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto; padding: 20px;">
    <h2>Available Properties</h2>

    <!-- Search Form -->
    <form method="get" style="margin-bottom: 20px;">
        <input type="text" name="q" value="{{ query }}" placeholder="Search properties..." style="width: 70%; padding: 10px; font-size: 16px;">
        <button type="submit" style="padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer;">Search</button>
    </form>

    {% if query %}
        <p>Search results for: <strong>"{{ query }}"</strong></p>
    {% endif %}

    {% if properties %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
            {% for property in properties %}
            <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background: white;">
                {% if property.photos %}
                    <img src="{{ property.photos.url }}" alt="{{ property.title }}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px; margin-bottom: 10px;">
                {% endif %}
                <h3 style="margin: 0 0 10px 0;"><a href="{% url 'property_detail' property.id %}" style="text-decoration: none; color: #333;">{{ property.title }}</a></h3>
                <p style="margin: 5px 0; color: #666;"><strong>ğŸ“</strong> {{ property.address }}</p>
                <p style="margin: 5px 0;"><strong>ğŸ </strong> {{ property.rooms }} rooms</p>
                <p style="margin: 5px 0;"><strong>ğŸ’°</strong> ${{ property.rent }}/month</p>
                <p style="margin: 5px 0;"><strong>ğŸ¦</strong> Deposit: ${{ property.deposit }}</p>
                <p style="margin: 10px 0 0 0;">
                    <a href="{% url 'property_detail' property.id %}" style="background: #007bff; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px;">View Details</a>
                </p>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align: center; font-size: 18px; color: #666; margin-top: 50px;">
            {% if query %}
                No properties found matching your search.
            {% else %}
                No properties available at the moment.
            {% endif %}
        </p>
    {% endif %}
</div>
{% endblock %}